import{r as C,s as Z,u as ct,j as _,M as tt,a as at,C as ut,o as X,S as U,i as K,P as et,b as G,f as ft,c as rt,N as J,t as nt,d as it,n as st,e as dt}from"./index-BoKVYegQ.js";function gt(){const c=C.useSyncExternalStore(Z.subscribe,Z.get),[e]=ct("circles-disabled",!1);function t(i){return 512-i-ut}return _.jsxs("div",{className:"StaticObjects",children:[Array.from({length:6}).map((i,n)=>_.jsx("svg",{className:"SectorBorder RestrictedSpace",viewBox:"0 0 599.19 342.36",children:_.jsxs("g",{children:[_.jsx("polyline",{points:"376.86 341.86 376.86 291.53 385.41 282.99 428.03 282.99 445.1 265.92 445.1 256.53 453.64 247.98 573.09 247.98 598.69 222.39 598.69 204.45 590.16 195.92 351.23 195.92 342.7 187.39 291.46 187.39 275.24 171.17 248.83 171.17 164.36 86.7 164.36 9.04 155.81 .5 129.35 .5 103.73 26.12 103.73 85.85 95.19 94.39 95.19 127.67 85.84 137.02 .5 137.02 .5 341.86 376.86 341.86"}),n===0&&_.jsx("foreignObject",{x:200,y:220,width:250,height:60,children:_.jsxs(_t,{children:[_.jsx("span",{children:"Область потенциальной"})," активности"]})})]})},n)),!e&&_.jsxs("svg",{className:c?"translucent":"",width:"100%",height:"100%",viewBox:"0 0 1024 1024",children:[_.jsx("circle",{cx:"512",cy:"512",r:"85.73"}),_.jsx("text",{x:"512",y:t(85.73),textAnchor:"middle",children:"Центр"}),_.jsx("circle",{cx:"512",cy:"512",r:"257.61"}),_.jsx("text",{x:"512",y:t(257.61),textAnchor:"middle",children:"Пояс"}),_.jsx("circle",{cx:"512",cy:"512",r:"	425.02"}),_.jsx("text",{x:"512",y:t(425.02),textAnchor:"middle",children:"Долина"})]}),tt.length>0&&tt.map((i,n)=>_.jsx(at,{...i},n)),_.jsx("img",{className:"RestrictedSpace__Logo",src:"/SS220-Political-Map//logo/RestrictedTransparent.svg"}),_.jsx("img",{className:"NorthSign",src:"/SS220-Political-Map//assets/NorthSign.svg"}),_.jsx("img",{className:"NorthEastSign",src:"/SS220-Political-Map//assets/NorthEastSign.svg"}),_.jsx("img",{className:"DeadSpace first",src:"/SS220-Political-Map//assets/DeadSpace.svg"}),_.jsx("img",{className:"DeadSpace second",src:"/SS220-Political-Map//assets/DeadSpace.svg"})]})}const mt=()=>{const c="АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789#%@&*_=+-!?";return Array.from({length:10},()=>c[Math.floor(Math.random()*c.length)]).join("")};function _t({children:c}){const[e,t]=C.useState("");return C.useEffect(()=>{const i=setInterval(()=>{t(mt())},100);return()=>clearInterval(i)},[]),_.jsxs("div",{className:"RandomText",children:[c," ",_.jsx("span",{className:"RandomText--text",children:e})]})}const lt=Math.pow(2,-52),H=new Uint32Array(512);class V{static from(e,t=St,i=wt){const n=e.length,l=new Float64Array(n*2);for(let s=0;s<n;s++){const o=e[s];l[2*s]=t(o),l[2*s+1]=i(o)}return new V(l)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*t-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:i,_hullTri:n,_hullHash:l}=this,s=e.length>>1;let o=1/0,r=1/0,h=-1/0,u=-1/0;for(let g=0;g<s;g++){const b=e[2*g],x=e[2*g+1];b<o&&(o=b),x<r&&(r=x),b>h&&(h=b),x>u&&(u=x),this._ids[g]=g}const d=(o+h)/2,a=(r+u)/2;let f,m,p;for(let g=0,b=1/0;g<s;g++){const x=W(d,a,e[2*g],e[2*g+1]);x<b&&(f=g,b=x)}const S=e[2*f],M=e[2*f+1];for(let g=0,b=1/0;g<s;g++){if(g===f)continue;const x=W(S,M,e[2*g],e[2*g+1]);x<b&&x>0&&(m=g,b=x)}let j=e[2*m],T=e[2*m+1],B=1/0;for(let g=0;g<s;g++){if(g===f||g===m)continue;const b=xt(S,M,j,T,e[2*g],e[2*g+1]);b<B&&(p=g,B=b)}let L=e[2*p],z=e[2*p+1];if(B===1/0){for(let x=0;x<s;x++)this._dists[x]=e[2*x]-e[0]||e[2*x+1]-e[1];F(this._ids,this._dists,0,s-1);const g=new Uint32Array(s);let b=0;for(let x=0,w=-1/0;x<s;x++){const I=this._ids[x],k=this._dists[I];k>w&&(g[b++]=I,w=k)}this.hull=g.subarray(0,b),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(X(S,M,j,T,L,z)<0){const g=m,b=j,x=T;m=p,j=L,T=z,p=g,L=b,z=x}const P=bt(S,M,j,T,L,z);this._cx=P.x,this._cy=P.y;for(let g=0;g<s;g++)this._dists[g]=W(e[2*g],e[2*g+1],P.x,P.y);F(this._ids,this._dists,0,s-1),this._hullStart=f;let E=3;i[f]=t[p]=m,i[m]=t[f]=p,i[p]=t[m]=f,n[f]=0,n[m]=1,n[p]=2,l.fill(-1),l[this._hashKey(S,M)]=f,l[this._hashKey(j,T)]=m,l[this._hashKey(L,z)]=p,this.trianglesLen=0,this._addTriangle(f,m,p,-1,-1,-1);for(let g=0,b,x;g<this._ids.length;g++){const w=this._ids[g],I=e[2*w],k=e[2*w+1];if(g>0&&Math.abs(I-b)<=lt&&Math.abs(k-x)<=lt||(b=I,x=k,w===f||w===m||w===p))continue;let $=0;for(let D=0,ht=this._hashKey(I,k);D<this._hashSize&&($=l[(ht+D)%this._hashSize],!($!==-1&&$!==i[$]));D++);$=t[$];let y=$,v;for(;v=i[y],X(I,k,e[2*y],e[2*y+1],e[2*v],e[2*v+1])>=0;)if(y=v,y===$){y=-1;break}if(y===-1)continue;let N=this._addTriangle(y,w,i[y],-1,-1,n[y]);n[w]=this._legalize(N+2),n[y]=N,E++;let A=i[y];for(;v=i[A],X(I,k,e[2*A],e[2*A+1],e[2*v],e[2*v+1])<0;)N=this._addTriangle(A,w,v,n[w],-1,n[A]),n[w]=this._legalize(N+2),i[A]=A,E--,A=v;if(y===$)for(;v=t[y],X(I,k,e[2*v],e[2*v+1],e[2*y],e[2*y+1])<0;)N=this._addTriangle(v,w,y,-1,n[y],n[v]),this._legalize(N+2),n[v]=N,i[y]=y,E--,y=v;this._hullStart=t[w]=y,i[y]=t[A]=w,i[w]=A,l[this._hashKey(I,k)]=w,l[this._hashKey(e[2*y],e[2*y+1])]=y}this.hull=new Uint32Array(E);for(let g=0,b=this._hullStart;g<E;g++)this.hull[g]=b,b=i[b];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(pt(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:i,coords:n}=this;let l=0,s=0;for(;;){const o=i[e],r=e-e%3;if(s=r+(e+2)%3,o===-1){if(l===0)break;e=H[--l];continue}const h=o-o%3,u=r+(e+1)%3,d=h+(o+2)%3,a=t[s],f=t[e],m=t[u],p=t[d];if(yt(n[2*a],n[2*a+1],n[2*f],n[2*f+1],n[2*m],n[2*m+1],n[2*p],n[2*p+1])){t[e]=p,t[o]=a;const M=i[d];if(M===-1){let T=this._hullStart;do{if(this._hullTri[T]===d){this._hullTri[T]=e;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(e,M),this._link(o,i[s]),this._link(s,d);const j=h+(o+1)%3;l<H.length&&(H[l++]=j)}else{if(l===0)break;e=H[--l]}}return s}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,i,n,l,s){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=i,this._link(o,n),this._link(o+1,l),this._link(o+2,s),this.trianglesLen+=3,o}}function pt(c,e){const t=c/(Math.abs(c)+Math.abs(e));return(e>0?3-t:1+t)/4}function W(c,e,t,i){const n=c-t,l=e-i;return n*n+l*l}function yt(c,e,t,i,n,l,s,o){const r=c-s,h=e-o,u=t-s,d=i-o,a=n-s,f=l-o,m=r*r+h*h,p=u*u+d*d,S=a*a+f*f;return r*(d*S-p*f)-h*(u*S-p*a)+m*(u*f-d*a)<0}function xt(c,e,t,i,n,l){const s=t-c,o=i-e,r=n-c,h=l-e,u=s*s+o*o,d=r*r+h*h,a=.5/(s*h-o*r),f=(h*u-o*d)*a,m=(s*d-r*u)*a;return f*f+m*m}function bt(c,e,t,i,n,l){const s=t-c,o=i-e,r=n-c,h=l-e,u=s*s+o*o,d=r*r+h*h,a=.5/(s*h-o*r),f=c+(h*u-o*d)*a,m=e+(s*d-r*u)*a;return{x:f,y:m}}function F(c,e,t,i){if(i-t<=20)for(let n=t+1;n<=i;n++){const l=c[n],s=e[l];let o=n-1;for(;o>=t&&e[c[o]]>s;)c[o+1]=c[o--];c[o+1]=l}else{const n=t+i>>1;let l=t+1,s=i;O(c,n,l),e[c[t]]>e[c[i]]&&O(c,t,i),e[c[l]]>e[c[i]]&&O(c,l,i),e[c[t]]>e[c[l]]&&O(c,t,l);const o=c[l],r=e[o];for(;;){do l++;while(e[c[l]]<r);do s--;while(e[c[s]]>r);if(s<l)break;O(c,l,s)}c[t+1]=c[s],c[s]=o,i-l+1>=s-t?(F(c,e,l,i),F(c,e,t,s-1)):(F(c,e,t,s-1),F(c,e,l,i))}}function O(c,e,t){const i=c[e];c[e]=c[t],c[t]=i}function St(c){return c[0]}function wt(c){return c[1]}const ot=1e-6;class Y{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,i){e=+e,t=+t,i=+i;const n=e+i,l=t;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${n},${l}`:(Math.abs(this._x1-n)>ot||Math.abs(this._y1-l)>ot)&&(this._+="L"+n+","+l),i&&(this._+=`A${i},${i},0,1,1,${e-i},${t}A${i},${i},0,1,1,${this._x1=n},${this._y1=l}`)}rect(e,t,i,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+i}v${+n}h${-i}Z`}value(){return this._||null}}class Q{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class jt{constructor(e,[t,i,n,l]=[0,0,960,500]){if(!((n=+n)>=(t=+t))||!((l=+l)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=n,this.xmin=t,this.ymax=l,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:i},vectors:n}=this;let l,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let p=0,S=0,M=i.length,j,T;p<M;p+=3,S+=2){const B=i[p]*2,L=i[p+1]*2,z=i[p+2]*2,P=e[B],E=e[B+1],g=e[L],b=e[L+1],x=e[z],w=e[z+1],I=g-P,k=b-E,$=x-P,y=w-E,v=(I*y-k*$)*2;if(Math.abs(v)<1e-9){if(l===void 0){l=s=0;for(const A of t)l+=e[A*2],s+=e[A*2+1];l/=t.length,s/=t.length}const N=1e9*Math.sign((l-P)*y-(s-E)*$);j=(P+x)/2-N*y,T=(E+w)/2+N*$}else{const N=1/v,A=I*I+k*k,D=$*$+y*y;j=P+(y*A-k*D)*N,T=E+(I*D-$*A)*N}o[S]=j,o[S+1]=T}let r=t[t.length-1],h,u=r*4,d,a=e[2*r],f,m=e[2*r+1];n.fill(0);for(let p=0;p<t.length;++p)r=t[p],h=u,d=a,f=m,u=r*4,a=e[2*r],m=e[2*r+1],n[h+2]=n[u]=f-m,n[h+3]=n[u+1]=a-d}render(e){const t=e==null?e=new Y:void 0,{delaunay:{halfedges:i,inedges:n,hull:l},circumcenters:s,vectors:o}=this;if(l.length<=1)return null;for(let u=0,d=i.length;u<d;++u){const a=i[u];if(a<u)continue;const f=Math.floor(u/3)*2,m=Math.floor(a/3)*2,p=s[f],S=s[f+1],M=s[m],j=s[m+1];this._renderSegment(p,S,M,j,e)}let r,h=l[l.length-1];for(let u=0;u<l.length;++u){r=h,h=l[u];const d=Math.floor(n[h]/3)*2,a=s[d],f=s[d+1],m=r*4,p=this._project(a,f,o[m+2],o[m+3]);p&&this._renderSegment(a,f,p[0],p[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new Y:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const i=t==null?t=new Y:void 0,n=this._clip(e);if(n===null||!n.length)return;t.moveTo(n[0],n[1]);let l=n.length;for(;n[0]===n[l-2]&&n[1]===n[l-1]&&l>1;)l-=2;for(let s=2;s<l;s+=2)(n[s]!==n[s-2]||n[s+1]!==n[s-1])&&t.lineTo(n[s],n[s+1]);return t.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,i=e.length/2;t<i;++t){const n=this.cellPolygon(t);n&&(n.index=t,yield n)}}cellPolygon(e){const t=new Q;return this.renderCell(e,t),t.value()}_renderSegment(e,t,i,n,l){let s;const o=this._regioncode(e,t),r=this._regioncode(i,n);o===0&&r===0?(l.moveTo(e,t),l.lineTo(i,n)):(s=this._clipSegment(e,t,i,n,o,r))&&(l.moveTo(s[0],s[1]),l.lineTo(s[2],s[3]))}contains(e,t,i){return t=+t,t!==t||(i=+i,i!==i)?!1:this.delaunay._step(e,t,i)===e}*neighbors(e){const t=this._clip(e);if(t)for(const i of this.delaunay.neighbors(e)){const n=this._clip(i);if(n){t:for(let l=0,s=t.length;l<s;l+=2)for(let o=0,r=n.length;o<r;o+=2)if(t[l]===n[o]&&t[l+1]===n[o+1]&&t[(l+2)%s]===n[(o+r-2)%r]&&t[(l+3)%s]===n[(o+r-1)%r]){yield i;break t}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:i,halfedges:n,triangles:l}}=this,s=i[e];if(s===-1)return null;const o=[];let r=s;do{const h=Math.floor(r/3);if(o.push(t[h*2],t[h*2+1]),r=r%3===2?r-2:r+1,l[r]!==e)break;r=n[r]}while(r!==s&&r!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:i}=this,n=e*4;return this._simplify(i[n]||i[n+1]?this._clipInfinite(e,t,i[n],i[n+1],i[n+2],i[n+3]):this._clipFinite(e,t))}_clipFinite(e,t){const i=t.length;let n=null,l,s,o=t[i-2],r=t[i-1],h,u=this._regioncode(o,r),d,a=0;for(let f=0;f<i;f+=2)if(l=o,s=r,o=t[f],r=t[f+1],h=u,u=this._regioncode(o,r),h===0&&u===0)d=a,a=0,n?n.push(o,r):n=[o,r];else{let m,p,S,M,j;if(h===0){if((m=this._clipSegment(l,s,o,r,h,u))===null)continue;[p,S,M,j]=m}else{if((m=this._clipSegment(o,r,l,s,u,h))===null)continue;[M,j,p,S]=m,d=a,a=this._edgecode(p,S),d&&a&&this._edge(e,d,a,n,n.length),n?n.push(p,S):n=[p,S]}d=a,a=this._edgecode(M,j),d&&a&&this._edge(e,d,a,n,n.length),n?n.push(M,j):n=[M,j]}if(n)d=a,a=this._edgecode(n[0],n[1]),d&&a&&this._edge(e,d,a,n,n.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return n}_clipSegment(e,t,i,n,l,s){const o=l<s;for(o&&([e,t,i,n,l,s]=[i,n,e,t,s,l]);;){if(l===0&&s===0)return o?[i,n,e,t]:[e,t,i,n];if(l&s)return null;let r,h,u=l||s;u&8?(r=e+(i-e)*(this.ymax-t)/(n-t),h=this.ymax):u&4?(r=e+(i-e)*(this.ymin-t)/(n-t),h=this.ymin):u&2?(h=t+(n-t)*(this.xmax-e)/(i-e),r=this.xmax):(h=t+(n-t)*(this.xmin-e)/(i-e),r=this.xmin),l?(e=r,t=h,l=this._regioncode(e,t)):(i=r,n=h,s=this._regioncode(i,n))}}_clipInfinite(e,t,i,n,l,s){let o=Array.from(t),r;if((r=this._project(o[0],o[1],i,n))&&o.unshift(r[0],r[1]),(r=this._project(o[o.length-2],o[o.length-1],l,s))&&o.push(r[0],r[1]),o=this._clipFinite(e,o))for(let h=0,u=o.length,d,a=this._edgecode(o[u-2],o[u-1]);h<u;h+=2)d=a,a=this._edgecode(o[h],o[h+1]),d&&a&&(h=this._edge(e,d,a,o,h),u=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,i,n,l){for(;t!==i;){let s,o;switch(t){case 5:t=4;continue;case 4:t=6,s=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,s=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,s=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,s=this.xmin,o=this.ymin;break}(n[l]!==s||n[l+1]!==o)&&this.contains(e,s,o)&&(n.splice(l,0,s,o),l+=2)}return l}_project(e,t,i,n){let l=1/0,s,o,r;if(n<0){if(t<=this.ymin)return null;(s=(this.ymin-t)/n)<l&&(r=this.ymin,o=e+(l=s)*i)}else if(n>0){if(t>=this.ymax)return null;(s=(this.ymax-t)/n)<l&&(r=this.ymax,o=e+(l=s)*i)}if(i>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/i)<l&&(o=this.xmax,r=t+(l=s)*n)}else if(i<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/i)<l&&(o=this.xmin,r=t+(l=s)*n)}return[o,r]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const i=(t+2)%e.length,n=(t+4)%e.length;(e[t]===e[i]&&e[i]===e[n]||e[t+1]===e[i+1]&&e[i+1]===e[n+1])&&(e.splice(i,2),t-=2)}e.length||(e=null)}return e}}const vt=2*Math.PI,R=Math.pow;function Mt(c){return c[0]}function Tt(c){return c[1]}function $t(c){const{triangles:e,coords:t}=c;for(let i=0;i<e.length;i+=3){const n=2*e[i],l=2*e[i+1],s=2*e[i+2];if((t[s]-t[n])*(t[l+1]-t[n+1])-(t[l]-t[n])*(t[s+1]-t[n+1])>1e-10)return!1}return!0}function At(c,e,t){return[c+Math.sin(c+e)*t,e+Math.cos(c-e)*t]}class q{static from(e,t=Mt,i=Tt,n){return new q("length"in e?It(e,t,i,n):Float64Array.from(kt(e,t,i,n)))}constructor(e){this._delaunator=new V(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&$t(e)){this.collinear=Int32Array.from({length:t.length/2},(a,f)=>f).sort((a,f)=>t[2*a]-t[2*f]||t[2*a+1]-t[2*f+1]);const r=this.collinear[0],h=this.collinear[this.collinear.length-1],u=[t[2*r],t[2*r+1],t[2*h],t[2*h+1]],d=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let a=0,f=t.length/2;a<f;++a){const m=At(t[2*a],t[2*a+1],d);t[2*a]=m[0],t[2*a+1]=m[1]}this._delaunator=new V(t)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,n=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let r=0,h=i.length;r<h;++r){const u=l[r%3===2?r-2:r+1];(i[r]===-1||s[u]===-1)&&(s[u]=r)}for(let r=0,h=n.length;r<h;++r)o[n[r]]=r;n.length<=2&&n.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=n[0],s[n[0]]=1,n.length===2&&(s[n[1]]=0,this.triangles[1]=n[1],this.triangles[2]=n[1]))}voronoi(e){return new jt(this,e)}*neighbors(e){const{inedges:t,hull:i,_hullIndex:n,halfedges:l,triangles:s,collinear:o}=this;if(o){const d=o.indexOf(e);d>0&&(yield o[d-1]),d<o.length-1&&(yield o[d+1]);return}const r=t[e];if(r===-1)return;let h=r,u=-1;do{if(yield u=s[h],h=h%3===2?h-2:h+1,s[h]!==e)return;if(h=l[h],h===-1){const d=i[(n[e]+1)%i.length];d!==u&&(yield d);return}}while(h!==r)}find(e,t,i=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const n=i;let l;for(;(l=this._step(i,e,t))>=0&&l!==i&&l!==n;)i=l;return l}_step(e,t,i){const{inedges:n,hull:l,_hullIndex:s,halfedges:o,triangles:r,points:h}=this;if(n[e]===-1||!h.length)return(e+1)%(h.length>>1);let u=e,d=R(t-h[e*2],2)+R(i-h[e*2+1],2);const a=n[e];let f=a;do{let m=r[f];const p=R(t-h[m*2],2)+R(i-h[m*2+1],2);if(p<d&&(d=p,u=m),f=f%3===2?f-2:f+1,r[f]!==e)break;if(f=o[f],f===-1){if(f=l[(s[e]+1)%l.length],f!==m&&R(t-h[f*2],2)+R(i-h[f*2+1],2)<d)return f;break}}while(f!==a);return u}render(e){const t=e==null?e=new Y:void 0,{points:i,halfedges:n,triangles:l}=this;for(let s=0,o=n.length;s<o;++s){const r=n[s];if(r<s)continue;const h=l[s]*2,u=l[r]*2;e.moveTo(i[h],i[h+1]),e.lineTo(i[u],i[u+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const i=e==null?e=new Y:void 0,{points:n}=this;for(let l=0,s=n.length;l<s;l+=2){const o=n[l],r=n[l+1];e.moveTo(o+t,r),e.arc(o,r,t,0,vt)}return i&&i.value()}renderHull(e){const t=e==null?e=new Y:void 0,{hull:i,points:n}=this,l=i[0]*2,s=i.length;e.moveTo(n[l],n[l+1]);for(let o=1;o<s;++o){const r=2*i[o];e.lineTo(n[r],n[r+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new Q;return this.renderHull(e),e.value()}renderTriangle(e,t){const i=t==null?t=new Y:void 0,{points:n,triangles:l}=this,s=l[e*=3]*2,o=l[e+1]*2,r=l[e+2]*2;return t.moveTo(n[s],n[s+1]),t.lineTo(n[o],n[o+1]),t.lineTo(n[r],n[r+1]),t.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,i=e.length/3;t<i;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new Q;return this.renderTriangle(e,t),t.value()}}function It(c,e,t,i){const n=c.length,l=new Float64Array(n*2);for(let s=0;s<n;++s){const o=c[s];l[s*2]=e.call(i,o,s,c),l[s*2+1]=t.call(i,o,s,c)}return l}function*kt(c,e,t,i){let n=0;for(const l of c)yield e.call(i,l,n,c),yield t.call(i,l,n,c),++n}function Nt(){const c=C.useMemo(()=>{const n=q.from(U,h=>h.position.x,h=>h.position.y).voronoi([0,0,1024,1024]),l=U.map((h,u)=>n.cellPolygon(u)),s={};l.forEach((h,u)=>{if(!h)return;const a=U[u].affiliation.name;s[a]||(s[a]=[]),s[a].push([h])});const o=[],r=Object.values(J);for(const h in s){const u=K.union(s[h]),d=K.intersection(u,et),a=r.find(f=>f.name===h);if(!a)throw new Error(`Sector with name ${h} not found!`);o.push({merged:d,...a})}return o},[]),e=C.useMemo(()=>{const n=q.from(U,h=>h.position.x,h=>h.position.y).voronoi([0,0,1024,1024]),l=U.map((h,u)=>n.cellPolygon(u)),s={};l.forEach((h,u)=>{if(!h)return;const d=U[u];if(!d.occupiedBy)return;const a=d.occupiedBy.name;s[a]||(s[a]=[]),s[a].push([h])});const o=[],r=Object.values(J);for(const h in s){const u=K.union(s[h]),d=K.intersection(u,et),a=r.find(f=>f.name===h);if(!a)throw new Error(`Sector with name ${h} not found!`);o.push({merged:d,...a})}return o},[]);function t(i){let n=0,l=0,s=0;for(let o=0;o<i.length;o++){const[r,h]=i[o],[u,d]=i[(o+1)%i.length],a=r*d-u*h;s+=a,n+=(r+u)*a,l+=(h+d)*a}return s/=2,[n/(6*s),l/(6*s)]}return _.jsxs(_.Fragment,{children:[e.map(i=>i.merged.map((n,l)=>n.map((s,o)=>_.jsx("path",{fill:`url(#occupied-${G(i.name)})`,d:`M${s.map(r=>r.join(",")).join("L")}Z`,style:{stroke:i.color,strokeWidth:1}},`occupied-${i.name}-${l}-${o}`)))),c.map(i=>i.merged.map((n,l)=>n.map((s,o)=>{const[r,h]=t(s),[u,d,a]=ft(s,r,h);return _.jsx(rt.Sector,{sector:i,children:_.jsxs("g",{children:[_.jsx("path",{className:"SectorBorder","data-name":i.name,style:{"--sector-color":i.color},d:`M${s.map(f=>f.join(",")).join("L")}Z`}),i.logo&&a>0&&_.jsx("image",{href:`/SS220-Political-Map//logo/${i.logo}.svg`,x:u-a/2,y:d-a/2,width:a,height:a,preserveAspectRatio:"xMidYMid meet"})]})},`${i.name}-logo-${l}-${o}`)})))]})}function Et(){const c=C.useSyncExternalStore(Z.subscribe,Z.get);return C.useMemo(()=>U.map(t=>{const i=t.affiliation.color,n=t.occupiedBy?.color,l=nt[t.type]||nt[it.Controlled],s=`translate(${t.position.x}, ${t.position.y}) scale(2)`;return{key:t.name,color:i,occupiedColor:n,path:l,transform:s,capital:t.type===it.Capital,x:t.position.x,y:t.position.y,labelX:t?.labelShift?.x,labelY:t?.labelShift?.y,...t}}),[]).map(t=>{let i=_.jsxs("div",{className:st(["Star__Label--text",t.description&&"hasMoreInfo"]),children:[t.description&&_.jsx(dt,{name:"bars",mr:.1,fontSize:.4}),t.name]});return t.description&&(i=_.jsx(rt.Star,{star:t,children:i})),_.jsxs("g",{id:G(t.name),className:"Star",style:{"--star-color":t.occupiedColor||t.color},children:[_.jsx("path",{d:t.path,transform:t.transform}),_.jsxs("g",{className:st(["Star__Label",(c||t.capital)&&"Star__Label--visible"]),children:[_.jsx("line",{className:"Star__Label--line",x1:t.x,y1:t.y-1.75,x2:t.x,y2:(t.labelY?t.y+t.labelY:t.y)-10}),_.jsx("foreignObject",{width:125,height:11,x:(t.labelX?t.x+t.labelX:t.x)-125/2,y:(t.labelY?t.y+t.labelY:t.y)-20,children:i})]})]},t.key)})}function Lt(){const c=C.useMemo(()=>Object.values(J).map(e=>_.jsx("pattern",{id:`occupied-${G(e.name)}`,patternUnits:"userSpaceOnUse",width:"12",height:"12",children:_.jsx("path",{d:"M-3,3 l6, -6M0, 12 l12, -12M9, 15 l6, -6",style:{stroke:`hsl(from ${e.color} h s 10)`,strokeWidth:3}})},`pattern-${G(e.name)}`)),[]);return _.jsxs("div",{style:{width:"var(--map-size)",height:"var(--map-size)"},children:[_.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 1024 1024",children:[_.jsx("defs",{children:c}),_.jsx(Nt,{}),_.jsx(Et,{})]}),_.jsx(gt,{})]})}export{Lt as default};
